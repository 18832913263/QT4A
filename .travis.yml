language: python
matrix:
  include:
  - os: linux
    dist: trusty
    sudo: false
    python: '2.7'
    env: BUILD_SDIST=true
install:
- pip install -r requirements.txt
script:
- python test/__init__.py
before_deploy: echo $TRAVIS_TAG | sed 's/^.//' > version.txt
deploy:
  skip_cleanup: true
  provider: pypi
  user: qta
  true:
    tags: true
    condition: $TRAVIS_TAG =~ v[0-9]+\.[0-9]+\.[0-9]+ && $BUILD_SDIST=true
  password:
    secure: "sO1GgnXgK4lSlGg9z8P/kxyszbbZvRYpRr07iIRxGe8gzye0IW+cC+Kq/L+8A42kDQiMmL/pKdSBZ+q4sQbcc1D1QBuFSsJAwT7eK7KMAYFPFzw+LY14qJ2EecAPY6TjZFzvHpZaabqM7FU+hsofKPmigLUQcUf434b8JLmvjJA3AnKIbRWeef2EaWAsF5gx7R1PCcLoDRT+ooNb2VHDnv88wTHValekzfZko7uNijJYmL0KzhQ9rl2iKkZ1KCaGYbwGeeMjuCZSZK7uoR0JqG4MDVQNPlNzLWP7UdfpRWVA4F+efMjrmb9LgdG4Zq7adx6BRcsepDN2srBIbmuNCZjJerimqUUAesbLuTURNMgN2Fo+wz5OcLjRxRe3dpf4BMsuSbNz4mKj81BxuL3lbL9b7Fv2Goqu8hpefvmcZN/Pb/WSMo7DAOQziCM4EhUM6Fu7SrUc9viYhQRb1gzNsntEVLDqe203G5+/cP2HQwKtGITXVbW3BsTB93/SCTWyJ/mhX93EHTUKWletNXf+RZqWkqrIWMUbuOL6V/5rgjGSOKBN1+Zsdb2moyY2JRYI6EMc94EKa6T8WghgVQDcOHviJ3SsAnX/LGZcBqaq+L4oS1VWhQ6O5OcU/agz4lsomO6phnhly2NbfMZrCB6kG+Z8BBhCWBL+/47CtsbKMsk="