language: python
matrix:
  include:
  - os: linux
    dist: trusty
    sudo: false
    python: '2.7'
    env: BUILD_SDIST=true
install:
- pip install -r requirements.txt
script:
- python test/__init__.py
before_deploy: echo $TRAVIS_TAG | sed 's/^.//' > version.txt
deploy:
  skip_cleanup: true
  provider: pypi
  user: qta
  true:
    tags: true
    condition: $TRAVIS_TAG =~ v[0-9]+\.[0-9]+\.[0-9]+ && $BUILD_SDIST=true
  password:
    secure: "qPjwm8hVOpE2SqnjDBh1DOJButMnbBVFH0lR3/9uEAliXiF/spALKrYgQAzq8RGnCFuQi20RgVJCmEy8eEjqFDaXPO7d2vl8P3Hn353OvqHMEAoMKcBobCQRnNFKr++sn+oJyLgFPGKV01gBHmibVlFGuAsYRoKB94ILq+j0nUfx9jC+SeCwMN38U2Ccv5ELDBCPhsv0220d0I9bzY24/c5jZKwEWXirke6vuNTp27aT2yOpS4lWnSFPyovpe7FUtAL7cPoFgZkSxuzTvRM3vQzaoqxZ3nhvf7Qs/Xas+z1y36eYfWpxMC+Xtjd4iOP8XuZrMEHmky9DFkJrC26h27pgHVXf7rJ2Tw0inQiqczBVakFShdVeuvv+nkGr954Hi7Eh36AOyF/9w7Td5TwIjvXFBj+8Jg5YTRN5yHVgNNp/82/OA8SzrlS/c0cqub7JJKVmEVz6GBcWLflZbXUynoAiZ96NejdCpjuXv/K2ejbWMwH5lDSAWU/oY4PPAwsGb6PI5RR4Hw2466HkpLKIylX6hpPI19hsegb+pRrc26hJ1udPNaOoUxsocljmqK+vy+qYdWROYLDpREFx37f6QJHUgSSJ/XrgXDXR9SbRSsjL83qxlgh+tzIbDma74NbcKkO/rsvT9wo5z8E2e0kVHuS8MjXdMwpecNrHiy/g6qs="